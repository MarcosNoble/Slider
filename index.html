<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Image Comparison Slider</title>
  <style>
    #container {
      width: 50%; /* Set the width of the container */
      margin: 0 auto; /* Center the container horizontally */
    }

    #wrapper {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      -o-user-select: none;
      user-select: none;
    }

    #divider {
      border: 3px orange solid;
      position: relative;
      overflow: hidden;
    }

    img {
      width: 100%;
      display: block;
    }

    #beforeImage {
      border: 3px red solid;
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 50%;
      overflow: hidden;
    }

    #handle {
      border: 2px yellow solid;
      border-radius: 50%;
      background: orange;
      height: 8%;
      width: 8%;
      position: absolute;
      top: 50%;
      left: 50%;
      margin: -4% 0 0 -4%;
      cursor: pointer;
    }
  </style>
</head>
<body>

<div id="container">
  <div id="wrapper">
    <div id="divider">
      <img src="https://metsul.com/wp-content/uploads/2024/05/sat0705c.jpg">
      <div id="beforeImage">
        <img src="https://metsul.com/wp-content/uploads/2024/05/sat0705d.jpg">
      </div>
      <span id="handle"></span>
    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(equalImgWidth);
  $(window).resize(equalImgWidth);

  var inputDown = ('ontouchstart' in document.documentElement) ? 'touchstart' : 'mousedown';
  var inputMove = ('ontouchmove' in document.documentElement) ? 'touchmove' : 'mousemove';
  var inputUp = ('ontouchend' in document.documentElement) ? 'touchend' : 'mouseup';
  var handleClicked = false;
  var containerOffset = $("#divider").offset().left;
  var containerWidth = $("#divider").outerWidth();

  var slidePercent = "";

  function equalImgWidth() {
    var divider = $("#divider");
    var imgWidth = divider.width() + 'px';

    $("#beforeImage img").css('width', imgWidth);
  }

  $("#handle").on(inputDown, handleScaleUp);

  $("#divider").on(inputMove, function (event) {
    var relativeX = (event.pageX) ? event.pageX : event.touches[0].pageX;
    slidePercent = (((relativeX - containerOffset) / containerWidth) * 100) + "%";

    resizeBeforeImage();
  });

  function handleScaleUp() {
    handleClicked = true;
    $("#handle").css("transform", "scale(2, 2)");
  }

  $(window).on(inputUp, function () {
    handleScaleDown();
  });

  function handleScaleDown() {
    handleClicked = false;
    $("#handle").css("transform", "scale(1, 1)");
  }

  function resizeBeforeImage() {

    if (handleClicked === true) {
      $("#beforeImage").css("width", slidePercent);
      $("#handle").css("left", slidePercent);
    }
  }
</script>
</body>
</html>
